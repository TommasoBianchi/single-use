<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Single-use by TommasoBianchi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Single-use</h1>
      <h2 class="project-tagline">Easily generate a protected, single use download with an expiration. Allows for a file to be downloaded only once.</h2>
      <a href="https://tommasobianchi.github.io/single-use/" class="btn">Demo</a>
      <a href="https://github.com/TommasoBianchi/single-use" class="btn">View on GitHub</a>
      <a href="https://github.com/TommasoBianchi/single-use/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/TommasoBianchi/single-use/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="single-use-download-script" class="anchor" href="#single-use-download-script" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Single use download script</h1>

<h2>
<a id="brief" class="anchor" href="#brief" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Brief</h2>

<p>The original script (by joshpangell) was written to be a very easy way for non-programmers to be able to create a secure way to share a single file, like for bands looking to give a single song to a single person, and invalidating the link once the song has been downloaded (it will work for any type of file). This is an enhanced version that requires a little longer setup but that gives the possibility to have different keys pointing at different files, a more solid approach to invalid keys after an expiration time and more options while generating keys.</p>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Description</h2>

<p>This script allows you to generate a unique key to download a file. This file will only be allowed to download a fixed amount of times. This key will also have an expiration date set on it.</p>

<p>For instance, if you wanted to sell a song for your band. You sold the song on your website for $1, you could use this script to allow that person to download your song only one time. It would only give them a limited number of hours/days/weeks/years to claim their download.</p>

<p>You can also mask the name of the file being downloaded, for further protection. For example, if your song was called "greatsong.zip", you could set the download link as "Band_Awesome-Awesome_Song.zip" (it is not a good idea to leave spaces in URL titles)</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>All files must be uploaded to a directory on your server. 
This directory's permissions MUST be <code>chmod 755</code> 
(Also known as) 
<code>User: read/write/execute</code>
<code>Group: read/execute</code>
<code>World: read/execute</code></p>

<p>The directory called <code>secret</code> must also have the same permissions set as the parent directory. </p>

<p>You will need to modify the <code>variables.php</code> file to set your file specific info and the <code>dbconnect.php</code> to setup the connection with your own database.</p>

<p>Once this is in place, you are ready to generate a new download key. To do this, you will need to use the password you set in the variables file. By default, that is <code>1234</code> (it is suggested to change it as soon as you setup).</p>

<p>Navigate to <code>yoursite.com/yourfolder/generate.php?pw=1234&amp;num=3&amp;path=/secret/file&amp;expire=2016-06-30%2012:00:00&amp;key_amount=20</code>, where pw is your password previously set, num is the number of downloads available to these keys (if you omit it that's 1 by default), path is where to find the file to download (from yourfolder), expire is the expiration date (if you omit it the system will use the EXPIRATION_DATE variable in <code>variables.php</code>) and key_amount is the number of keys to add with these settings (if you omit it that's 1 by default).</p>

<p>Copy the key that is generated (or download a txt file listing all newly created keys) and send it off. Voila! Done.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/TommasoBianchi/single-use">Single-use</a> is maintained by <a href="https://github.com/TommasoBianchi">TommasoBianchi</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
